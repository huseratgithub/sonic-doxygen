<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SONiC-202211: E:/GitHub/SONiC/202211/sonic-buildimage/src/sonic-sairedis/syncd/NotificationQueue.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SONiC-202211
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e5fbe6d2783ccd4c93c7856d92d7be6e.html">GitHub</a></li><li class="navelem"><a class="el" href="dir_dc5805e173b8f91a8d3c2a60bad85970.html">SONiC</a></li><li class="navelem"><a class="el" href="dir_224c638ab66b8d20ef05374668ae2c40.html">202211</a></li><li class="navelem"><a class="el" href="dir_044b2b476e71ff223f3c76d5977c8a0f.html">sonic-buildimage</a></li><li class="navelem"><a class="el" href="dir_89a428ef53ba9621fa86e21403f33be4.html">src</a></li><li class="navelem"><a class="el" href="dir_7ca6426c1281299c5cbaafa466b921a1.html">sonic-sairedis</a></li><li class="navelem"><a class="el" href="dir_573eb0b3dea5c4264573b88d44722324.html">syncd</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">NotificationQueue.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sai.h&gt;</code><br />
<code>#include &lt;saimetadata.h&gt;</code><br />
<code>#include &quot;swss/table.h&quot;</code><br />
<code>#include &lt;queue&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for NotificationQueue.h:</div>
<div class="dyncontent">
<div class="center"><img src="_notification_queue_8h__incl.png" border="0" usemap="#a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8h" alt=""/></div>
<map name="a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8h" id="a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8h">
<area shape="rect" title=" " alt="" coords="147,5,361,80"/>
<area shape="rect" title=" " alt="" coords="5,128,55,155"/>
<area shape="poly" title=" " alt="" coords="170,83,70,126,68,121,168,78"/>
<area shape="rect" title=" " alt="" coords="78,128,182,155"/>
<area shape="poly" title=" " alt="" coords="208,83,160,120,157,116,205,78"/>
<area shape="rect" title=" " alt="" coords="206,128,302,155"/>
<area shape="poly" title=" " alt="" coords="257,80,257,112,251,112,251,80"/>
<area shape="rect" title=" " alt="" coords="326,128,382,155"/>
<area shape="poly" title=" " alt="" coords="294,78,332,115,328,119,290,82"/>
<area shape="rect" title=" " alt="" coords="407,128,464,155"/>
<area shape="poly" title=" " alt="" coords="324,78,400,118,397,123,322,83"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="_notification_queue_8h__dep__incl.png" border="0" usemap="#a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8hdep" alt=""/></div>
<map name="a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8hdep" id="a_e_1_2_git_hub_2_s_o_ni_c_2202211_2sonic-buildimage_2src_2sonic-sairedis_2syncd_2_notification_queue_8hdep">
<area shape="rect" title=" " alt="" coords="1091,5,1306,80"/>
<area shape="rect" href="_notification_handler_8h.html" title=" " alt="" coords="947,251,1162,325"/>
<area shape="poly" title=" " alt="" coords="1118,91,1098,109,1082,129,1068,159,1060,191,1055,251,1050,250,1055,190,1063,157,1078,127,1094,105,1114,87"/>
<area shape="rect" href="_notification_processor_8h.html" title=" " alt="" coords="1091,128,1306,203"/>
<area shape="poly" title=" " alt="" coords="1201,96,1201,128,1196,128,1196,96"/>
<area shape="rect" href="_notification_queue_8cpp.html" title=" " alt="" coords="1330,128,1544,203"/>
<area shape="poly" title=" " alt="" coords="1286,85,1365,125,1363,130,1284,90"/>
<area shape="rect" href="_comparison_logic_8cpp.html" title=" " alt="" coords="5,496,224,571"/>
<area shape="poly" title=" " alt="" coords="932,292,812,297,671,310,520,336,446,354,374,376,314,402,256,433,162,498,159,493,253,429,311,397,372,371,445,348,519,330,670,305,812,292,931,286"/>
<area shape="rect" href="_comparison_logic_8h.html" title=" " alt="" coords="385,373,604,448"/>
<area shape="poly" title=" " alt="" coords="933,313,784,341,623,376,605,380,604,375,622,371,783,336,932,308"/>
<area shape="rect" href="_syncd_8cpp.html" title=" " alt="" coords="648,504,858,563"/>
<area shape="poly" title=" " alt="" coords="933,302,853,312,775,328,709,349,685,361,669,375,658,392,656,409,669,447,688,477,713,502,709,505,684,480,664,449,651,409,653,391,664,372,682,357,707,344,773,323,852,307,932,297"/>
<area shape="rect" href="_hard_reiniter_8h.html" title=" " alt="" coords="678,381,911,440"/>
<area shape="poly" title=" " alt="" coords="963,335,858,383,855,378,960,330"/>
<area shape="rect" href="_notification_handler_8cpp.html" title=" " alt="" coords="1249,373,1463,448"/>
<area shape="poly" title=" " alt="" coords="1162,329,1265,370,1263,375,1160,334"/>
<area shape="rect" href="_single_reiniter_8cpp.html" title=" " alt="" coords="1153,504,1407,563"/>
<area shape="poly" title=" " alt="" coords="1139,332,1188,372,1228,430,1267,502,1263,505,1223,433,1185,375,1136,336"/>
<area shape="rect" href="_single_reiniter_8h.html" title=" " alt="" coords="934,381,1175,440"/>
<area shape="poly" title=" " alt="" coords="1057,341,1057,381,1052,381,1052,341"/>
<area shape="rect" href="_syncd_8h.html" title=" " alt="" coords="1487,381,1683,440"/>
<area shape="poly" title=" " alt="" coords="1178,322,1180,323,1263,338,1328,346,1393,354,1475,371,1503,378,1501,383,1474,376,1392,359,1327,351,1262,343,1179,328,1177,327"/>
<area shape="poly" title=" " alt="" coords="371,454,225,500,223,495,370,449"/>
<area shape="rect" href="_view_8cpp.html" title=" " alt="" coords="248,496,424,571"/>
<area shape="poly" title=" " alt="" coords="436,460,386,498,382,493,433,455"/>
<area shape="rect" href="_view_cmp_8cpp.html" title=" " alt="" coords="448,496,624,571"/>
<area shape="poly" title=" " alt="" coords="515,462,526,495,521,496,510,464"/>
<area shape="poly" title=" " alt="" coords="588,453,693,501,690,506,586,457"/>
<area shape="poly" title=" " alt="" coords="782,455,766,504,761,502,777,454"/>
<area shape="rect" href="_hard_reiniter_8cpp.html" title=" " alt="" coords="882,504,1128,563"/>
<area shape="poly" title=" " alt="" coords="859,445,956,501,954,506,856,450"/>
<area shape="poly" title=" " alt="" coords="1039,456,1019,504,1014,502,1035,454"/>
<area shape="poly" title=" " alt="" coords="1123,445,1227,501,1225,506,1120,450"/>
<area shape="poly" title=" " alt="" coords="1491,447,1475,451,1384,466,1306,473,1173,475,1039,477,962,484,871,499,839,506,838,501,870,493,961,479,1039,472,1173,470,1306,468,1383,460,1474,445,1489,442"/>
<area shape="rect" href="syncd__main_8cpp.html" title=" " alt="" coords="1463,496,1646,571"/>
<area shape="poly" title=" " alt="" coords="1577,456,1566,496,1561,495,1572,455"/>
<area shape="rect" href="syncd_2tests_8cpp.html" title=" " alt="" coords="1671,504,1873,563"/>
<area shape="poly" title=" " alt="" coords="1643,446,1729,501,1726,506,1641,451"/>
<area shape="poly" title=" " alt="" coords="1145,215,1100,252,1097,248,1141,211"/>
<area shape="poly" title=" " alt="" coords="1195,218,1196,245,1200,274,1210,301,1226,324,1254,347,1282,361,1309,366,1338,367,1400,363,1436,364,1475,371,1502,378,1500,383,1474,376,1435,369,1400,368,1338,372,1309,372,1280,366,1251,352,1222,327,1205,303,1195,275,1191,246,1190,218"/>
<area shape="rect" href="_notification_processor_8cpp.html" title=" " alt="" coords="1235,251,1450,325"/>
<area shape="poly" title=" " alt="" coords="1256,211,1300,248,1297,252,1252,215"/>
</map>
</div>
</div>
<p><a href="_notification_queue_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyncd_1_1_notification_queue.html">syncd::NotificationQueue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesyncd.html">syncd</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a78c7bf5be29d285617972763f96893d4" id="r_a78c7bf5be29d285617972763f96893d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78c7bf5be29d285617972763f96893d4">DEFAULT_NOTIFICATION_QUEUE_SIZE_LIMIT</a>&#160;&#160;&#160;(300000)</td></tr>
<tr class="memdesc:a78c7bf5be29d285617972763f96893d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default notification queue size limit.  <br /></td></tr>
<tr class="separator:a78c7bf5be29d285617972763f96893d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e8e76b3b6642c332f885803d927fd2" id="r_a28e8e76b3b6642c332f885803d927fd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a28e8e76b3b6642c332f885803d927fd2">DEFAULT_NOTIFICATION_CONSECUTIVE_THRESHOLD</a>&#160;&#160;&#160;(1000)</td></tr>
<tr class="separator:a28e8e76b3b6642c332f885803d927fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a28e8e76b3b6642c332f885803d927fd2" name="a28e8e76b3b6642c332f885803d927fd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e8e76b3b6642c332f885803d927fd2">&#9670;&#160;</a></span>DEFAULT_NOTIFICATION_CONSECUTIVE_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_NOTIFICATION_CONSECUTIVE_THRESHOLD&#160;&#160;&#160;(1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_notification_queue_8h_source.html#l00029">29</a> of file <a class="el" href="_notification_queue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
<a id="a78c7bf5be29d285617972763f96893d4" name="a78c7bf5be29d285617972763f96893d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c7bf5be29d285617972763f96893d4">&#9670;&#160;</a></span>DEFAULT_NOTIFICATION_QUEUE_SIZE_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_NOTIFICATION_QUEUE_SIZE_LIMIT&#160;&#160;&#160;(300000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default notification queue size limit. </p>
<p>Value based on typical L2 deployment with 256k MAC entries and some extra buffer for other events like port-state, q-deadlock etc</p>
<p>Note: We recently found a case where SAI continuously sending switch notification events that also caused the queue to keep growing and eventually exhaust all system memory and crashed. So a new detection/limit scheme is being implemented by keeping track of the last Event and if the current Event matches the last Event, then the last Event Count will get incremented and this count will also be used as part of the equation to ensure this notification should also be dropped if the queue size limit has already reached and not just dropping FDB events only. TODO: move to config, also this limit only applies to fdb notifications </p>

<p class="definition">Definition at line <a class="el" href="_notification_queue_8h_source.html#l00028">28</a> of file <a class="el" href="_notification_queue_8h_source.html">NotificationQueue.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
